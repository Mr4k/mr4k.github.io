<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>The Best You Ever Had</title>
  <meta name="description" content="An exploration of optimal stopping policies">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://localhost:4000/probability/choice/decision/2018/05/06/stopping.html">
  <link rel="alternate" type="application/rss+xml" title="Peter Stefek" href="http://localhost:4000/feed.xml">


   <script type="text/x-mathjax-config"> MathJax.Hub.Config({ TeX: { equationNumbers: { autoNumber: "none" } } }); </script>
       <script type="text/x-mathjax-config">
         MathJax.Hub.Config({
           tex2jax: {
             inlineMath: [ ['$','$'], ["\\(","\\)"] ],
             processEscapes: true
           }
         });
    </script>
    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
       

</head>


  <body>

    <link rel="stylesheet" href="overlay.css">
<header class="site-header">

  <div class="wrapper">


    <div>
      <a style="display:block" href="/">
        <div style = "position: absolute;" class="site-title">Peter Stefek</div>
      </a>
      <canvas id="myCanvas" width="150" height="60"></canvas>
    </div>


    <script>

      window.requestAnimFrame = (function(callback) {
            return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame ||
            function(callback) {
              window.setTimeout(callback, 1000 / 60);
            };
         })();


      function choosePointOnBox(box) {
        return [(box[2] - box[0]) * Math.random() + box[0], (box[3] - box[1]) * Math.random() + box[1]];
      }

      function distance(pt1, pt2) {
        return Math.sqrt((pt1[0] - pt2[0]) * (pt1[0] - pt2[0]) + (pt1[1] - pt2[1]) * (pt1[1] - pt2[1]))
      }

      particles = []

      var canvas = document.getElementById("myCanvas");
      var context = canvas.getContext("2d");

      box = [12, 12, 138, 48];
      colors = ["#E05067", "#FA8A67", "#9E337E", "#511C7A", "#291559"];
      for (var i = 0; i < 50; i++) {
        pt = choosePointOnBox(box);
        radius = Math.max((6 - distance(pt, [75, 30]) * 0.1), 0)
        particles.push([pt, Math.random() * Math.PI, radius + 8, Math.random() * 0.002 + 0.002])
      }

      var render = function() {
          // Clear the canvas
          context.clearRect(0, 0, canvas.width, canvas.height);

          var i = particles.length;
          while (i--) {
            pt = particles[i][0]
            //console.log(pt)
            currentRadius = particles[i][1]
            maxRadius = particles[i][2]

            particles[i][1] += particles[i][3]
            //console.log(currentRadius);
            if (particles[i][1] >= Math.PI) {
              particles.splice(i, 1);
              pt = choosePointOnBox(box);
              radius = Math.max((6 - distance(pt, [75, 30]) * 0.1), 0)
              particles.push([pt, 0, radius + 8, Math.random() * 0.002 + 0.002])
            }

            context.fillStyle = colors[Math.floor(((pt[0] - box[0]) / box[2]) * colors.length)];
          context.beginPath();
            context.arc(pt[0], pt[1], Math.sin(currentRadius) * maxRadius, 0, 2 * Math.PI);
          context.fill();
          }

          // Redraw
          requestAnimationFrame(render);
      };

      // Start the redrawing process
      render();


    </script>

    <!--<nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>!-->

      <!--<div class="trigger">
        
          
          <a class="page-link" href="/about/"><b>About</b></a>
          
        
          
        
          
        
          
          <a class="page-link" href="/projects/impact.html">Impact</a>
          
        
          
        
          
          <a class="page-link" href="/projects/iris.html">Iris</a>
          
        
          
          <a class="page-link" href="/projects/lightbox.html">Lightbox</a>
          
        
          
        
          
          <a class="page-link" href="/projects/playchess.html">Playchess</a>
          
        
      </div>
    </nav> !-->

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">The Best You Ever Had</h1>
    <p class="post-meta"><time datetime="2018-05-06T06:50:40-04:00" itemprop="datePublished">May 6, 2018</time></p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>Pretend for a minute that you are a recruiter whose looking for people to fill a position. Maybe you’re reading this post because I have applied for a position at your company and you’re vetting me or something. Anyways the point is I’m one candidate among many. Even if you interview me and like me how do you know there’s not someone better out there to fill the position? <br /><br />
More formally, you are going to interview $N$ candidates for a job. The order they come is random with all orderings will be equally likely. After each interview with a candidate you will come up with a quality score (a real number between 0 and 1) for them and then have to choose whether to hire them on the spot or reject them and hope a better fit comes along. Your goal is to hire the best of the best (the candidate who has the highest score among all N candidates) but you have no idea what the job market looks like (no information about the distribution from which these candidates are drawn). What is the probability that you succeed in your task given that you use the optimal hiring strategy <br /><br />
This problem is know sometimes as the best choice problem or the secretary problem. It is a very famous and well studied problem even outside of math because of its very surprising solution, <br /><br /></p>
<div style="text-align:center;"> $\lim_{N \to \infty}Pr(\mbox{best is selected out of N candidates}) \to \frac{1}{e}$ </div>
<p><br />
This is a really cool result for several reasons. First of all it’s not even clear that there should be any kind of one fits all strategy. Secondly $\frac{1}{e} = 0.367879…$ which seems absurdly high. If have a million candidates you have around a one third chance of choosing <strong>the</strong> very best one. The strategy is also fairly simple and seemingly bizarre<br /><br />
<strong>Strategy:</strong> For every N there is an $r_N^* $ such that the following strategy is optimal. Reject the first $r_N^* - 1$ candidates then choose the next candidate who is better all of then them. <br /><br />
This type of strategy is called a cutoff rule. The final surprising fact is that <br /></p>
<div style="text-align:center;"> $$\lim_{N \to \infty} r_N^* \to \frac{1}{e}$$ </div>
<p>This means that you see less than half of the many candidates while making your decision. <br /><br />
<strong>Analysis</strong><br />
Analyzing the cutoff rule approach to this problem is actually fairly straight forward. Consider the cutoff rule with a variable $r$ which defines the cutoff point. The probability of finding the max can be though as follows, <br /></p>
<div style="text-align:center;"> $$P(\mbox{success}) = \sum_{i=1}^N P(\mbox{applicant i is selected} \cap \mbox{applicant i is the best})$$ </div>
<div style="text-align:center;"> $$P(\mbox{success}) = \sum_{i=1}^N P(\mbox{applicant i is selected} \vert \mbox{applicant i is the best}) \times P(\mbox{applicant i is the best})$$ </div>
<p>The probability of any applicant being the best if $\frac{1}{n}$ because our candidates are equally likely to appear in any order. So</p>
<div style="text-align:center;"> $$P(\mbox{success}) = \sum_{i=1}^N(\mbox{applicant i is selected} \vert \mbox{applicant i is the best}) \times \frac{1}{n}$$ </div>
<p><br />
[Continue explaining basic secretary problem]
<br /><br />
So in the case where we know nothing about the distribution, the cutoff rule is optimal. What about if we do know something? This time we know our distribution is uniform on $[0,1]$. Now let’s try to come up with an optimal strategy for this version. After each interview we have to accept or reject the candidate we just interviewed (let’s call this candidate the ith one). To gain some insight we can take a look at the following statement, <br /></p>
<div style="text-align:center;">$$P(\mbox{best candidate was in past}) + P(\mbox{candidate i is best}) + P(\mbox{best candidate is in future}) = 1$$</div>
<p>Now we don’t have control over the past but we do have the choice between taking i and rejecting i. Therefore we pick choose the option between those two which has the highest probability of giving us the best candidate. Let’s make a few observations about these probabilities. <br /><br />
For example that if candidate i’s score is less than any of the previous candidates we know that:</p>
<div style="text-align:center;">$$P(\mbox{candidate i is best}) = 0$$</div>
<p>In this case we would always choose to move on because no matter what our chance is greater than or equal to 0 so we can’t do any worse and we might do better. <br /><br />
Now what if candidate i is better than all the other candidates we’ve seen so far? Off the bat we know that, <br /></p>
<div style="text-align:center;">$$P(\mbox{best candidate was in past}) = 0$$</div>
<p>This means that,</p>
<div style="text-align:center;">$$P(\mbox{candidate i is best}) + P(\mbox{best candidate is in future}) = 1$$</div>
<div style="text-align:center;">$$P(\mbox{best candidate is in future}) = 1 - P(\mbox{candidate i is best})$$</div>
<p><br />
Let $q_i$ denote candidate i’s quality score. That we want now is to know the probability that we will not find a better candidate in our last $N-i$ interviews. Since our candidate scores are drawn from a uniform distribution on $[0,1]$,<br /></p>
<div style="text-align:center;">$$ P(\mbox{candidate j's score } \leq q_i) = q_i, \forall j $$ </div>
<div style="text-align:center;">$$ P(\mbox{last N-i candidates are all } \leq q_i) = \prod_{j = i+1}^{N}P(\mbox{candidate j's score } \leq q_i) = q_i^{N-i} $$ </div>
<div style="text-align:center;">$$ P(\mbox{best candidate in future}) = 1 - P(\mbox{last N-i candidates are all } \leq q_i) = 1 - q_i^{N-i} $$ </div>
<p>So when is it optimal to choose to accept candidate i? It is when,</p>
<div style="text-align:center;">$$P(\mbox{candidate i is best}) \geq P(\mbox{best candidate is in future})$$</div>
<p>Equivalently this when,</p>
<div style="text-align:center;">$$P(\mbox{best candidate is in future}) \leq \frac{1}{2}$$</div>
<div style="text-align:center;">$$1 - q_i^{N-i} \leq \frac{1}{2}$$</div>
<p>Using this information we can solve for the threshold $q^*_i$ such that if $q_i \geq q^*_i$ our best option is to choose candidate i.</p>
<div style="text-align:center;">$$1 - {q^*_i}^{N-i} = \frac{1}{2}$$</div>
<div style="text-align:center;">$${q^*_i}^{N-i} = \frac{1}{2}$$</div>
<div style="text-align:center;">$${q^*_i}^{N-i} = \frac{1}{2}$$</div>
<div style="text-align:center;">$$q^*_i = \frac{1}{2}^\frac{1}{N-i}$$</div>
<p><br /></p>

<p>So now we want to calculate the total probability of success under this new optimal strategy <br />
Following a similar idea from our analysis of the more general optimal stopping problem we can say, <br /></p>
<div style="text-align:center;"> $$P(\mbox{we find the max}) = \sum_{i=1}^{N} P(\mbox{we select the max during interview i})$$ </div>
<p>Notice that this sum is okay because all of these events are mutually exclusive. <br /></p>
<div style="text-align:center;"> $$P(\mbox{we find the max}) = \big(\sum_{i=1}^{N-1} P(\mbox{candidate i is selected} \cap \mbox{candidate i is max})\big) + P(we succeed at interview n)$$ </div>
<div style="text-align:center;"> $$P(\mbox{we find the max}) = \sum_{i=1}^N P(\mbox{candidate i is selected} \cap \mbox{candidate i is max})$$ </div>

<p><br /><br /><br /></p>


  </div>

</article>

      </div>
    </div>

    <!--<footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">Peter Stefek</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>Contact</li>
          <li><a href="mailto:pstefek@oberlin.edu">pstefek@oberlin.edu</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/mr4k"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">mr4k</span></a>

          </li>
          

          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>I'm a rising third year student at Oberlin College. I am currently majoring in Math and Computer Science. 
</p>
      </div>
    </div>

  </div>

</footer> !-->

    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-83611962-1', 'auto');
  ga('send', 'pageview');

</script>
  </body>

</html>
